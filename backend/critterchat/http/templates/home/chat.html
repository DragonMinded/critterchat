{% extends "base.html" %}
{% block includes %}
  <script src="{{ url_for('static', filename=jsname) }}"></script>
  <script src="{{ url_for('static', filename='twemoji-16.0.1.min.js') }}"></script>
  <link href="{{ url_for('static', filename='chat.css') }}?{{ cachebust }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='autocomplete.css') }}?{{ cachebust }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='emojisearch.css') }}?{{ cachebust }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='jquery.modal.min.css') }}?{{ cachebust }}" rel="stylesheet" />
  <script>
    window.twemojiOptions = { base: "{{ url_for('static', filename='twemoji/') }}" }
    window.versionCheck = "{{ url_for('chat.version') }}";
    window.appname = {{ title|tojson|safe }};
    window.version = {{ version|tojson|safe }};
    window.emojis = {{ emojis|tojson|safe }};
    window.emotes = {{ emotes|tojson|safe }};
    window.username = {{ username|tojson|safe }};
    window.defavi = {{ defavi|tojson|safe }};
    window.defroom = {{ defroom|tojson|safe }};
    window.silence = {{ url_for('static', filename='silence.mp3')|tojson|safe }};
  </script>
{% endblock %}
{% block content %}
    <div class="menu">
        <div class="rooms">
        </div>
        <div class="actions">
            <div class="item">
                <button id="search-chat">
                    <div class="maskable search-svg"></div>
                    search chat/chatter
                </button>
            </div>
        </div>
        <div class="actions">
            <div class="item">
                <button id="edit-preferences">
                    <div class="maskable edit-svg"></div>
                    edit preferences
                </button>
            </div>
            <div class="item">
                <button id="edit-profile">
                    <div class="maskable edit-svg"></div>
                    edit profile
                </button>
            </div>
            <div class="item">
                <button id="log-out">
                    <div class="maskable logout-svg"></div>
                    log out
                </button>
            </div>
        </div>
    </div>
    <div class="chat">
        <div class="top-info">
            <div class="back">
                <div class="maskable back-button-svg"></div>
                 <div class="badge empty"><div class="count"></div></div>
            </div>
            <div class="icon hidden">
                <img />
                <div class="room-indicator">#</div>
            </div>
            <div class="info-wrapper">
                <div class="title">&nbsp;</div>
            </div>
            <div class="info-wrapper">
                <div class="topic">&nbsp;</div>
            </div>
        </div>
        <div class="conversation-wrapper">
            <div class="conversation">
                <div class="loading-wrapper">
                    <div class="loading">
                        Now loading your chat...
                    </div>
                </div>
            </div>
        </div>
        <form class="actions" action="" method="POST" id="message-actions">
            <div class="newmessage">
                <div class="new-messages-alert">new messages</div>
                <input type="text" id="message" autocomplete="off" placeholder="Type a message..." />
                <div class="emoji-search"></div>
            </div>
            <div class="send">
                <button id="sendmessage">send</button>
            </div>
            <div class="info">
                <button id="infotoggle">info</button>
            </div>
        </form>
    </div>
    <div class="info hidden">
        <div class="header">
            <div class="back">
                <div class="maskable back-button-svg"></div>
                 <div class="badge empty"><div class="count"></div></div>
            </div>
            <div class="title-wrapper">
                <span class="title" id="room-title" dir="auto"></span>
                <span class="desc">with the following members:</span>
            </div>
        </div>
        <div class="occupants">
        </div>
        <div class="actions">
            <div class="item">
                <button id="edit-info">
                    <div class="maskable edit-svg"></div>
                    edit info
                </button>
            </div>
            <div class="item">
                <button id="leave-room">
                    <div class="maskable leave-svg"></div>
                    leave <span id="leave-type">chat</span>
                </button>
            </div>
        </div>
    </div>

    {% include "modals/search.html" %}
    {% include "modals/editpreferences.html" %}
    {% include "modals/editprofile.html" %}
    {% include "modals/chatdetails.html" %}
    {% include "modals/infomodal.html" %}
    {% include "modals/warningmodal.html" %}
{% endblock %}
